<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Entebbe Airport Chatbot</title>
  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <!-- Leaflet for maps -->
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" />
  <style>
    body {
      margin: 0;
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
      background: linear-gradient(135deg, #f0f7ff, #dbeafe);
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
    }

    .chatbot {
      width: 400px;
      max-width: 95%;
      background: #ffffff;
      border-radius: 20px;
      overflow: hidden;
      display: flex;
      flex-direction: column;
      box-shadow: 0 10px 40px rgba(0,0,0,0.2);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }
    .chatbot:hover {
      transform: translateY(-5px);
      box-shadow: 0 15px 50px rgba(0,0,0,0.25);
    }

    .chatbot .header {
      background: linear-gradient(90deg, #0d6efd, #6610f2);
      color: white;
      padding: 18px;
      border-bottom: 2px solid #e5e7eb;
    }
    .chatbot .header strong {
      font-size: 1.2rem;
    }

    .chatbot .messages {
      flex: 1;
      overflow-y: auto;
      background: #f9fafb;
      padding: 16px;
    }
    .message { margin-bottom: 14px; display: flex; }
    .message.user { justify-content: flex-end; }
    .message .bubble {
      padding: 12px 16px;
      border-radius: 18px;
      max-width: 75%;
      line-height: 1.4;
      font-size: 0.95rem;
    }
    .message.user .bubble {
      background: #0d6efd;
      color: #fff;
      border-bottom-right-radius: 4px;
    }
    .message.bot .bubble {
      background: #e5e7eb;
      color: #111827;
      border-bottom-left-radius: 4px;
    }

    .quick-actions {
      padding: 12px;
      border-top: 1px solid #e5e7eb;
      background: #fff;
      display: flex;
      flex-wrap: wrap;
      gap: 8px;
    }
    .quick-actions .btn {
      border-radius: 20px;
      font-size: 0.8rem;
      padding: 6px 12px;
    }

    .input-group {
      border-top: 1px solid #e5e7eb;
      background: #fff;
      padding: 10px;
    }
    .input-group input {
      border-radius: 20px 0 0 20px;
    }
    .input-group .btn {
      border-radius: 0 20px 20px 0;
    }

    /* Map modal */
    .map-area { height: 300px; }

    @media (max-width: 500px) {
      .chatbot { width: 100%; height: 100vh; border-radius: 0; }
      .chatbot .messages { height: calc(100vh - 220px); }
    }
  </style>
</head>
<body>

<!-- Chatbot UI -->
<div class="chatbot" id="chatbot">
  <div class="header d-flex align-items-center justify-content-between">
    <div>
      <strong>Entebbe Airport Assistant</strong>
      <div style="font-size:12px;opacity:0.9">Your travel guide ‚úàÔ∏è</div>
    </div>
    <div>
      <button class="btn btn-sm btn-light" id="openMapBtn">üó∫</button>
    </div>
  </div>

  <div class="messages" id="messages" role="log" aria-live="polite"></div>

  <div class="quick-actions">
    <button class="btn btn-outline-primary btn-sm" onclick="quick('flight status')">Flight status</button>
    <button class="btn btn-outline-primary btn-sm" onclick="quick('terminal map')">Terminal map</button>
    <button class="btn btn-outline-primary btn-sm" onclick="quick('transport to Kampala')">Transport to Kampala</button>
    <button class="btn btn-outline-primary btn-sm" onclick="quick('baggage claim')">Baggage claim</button>
  </div>

  <div class="input-group">
    <input id="input" type="text" class="form-control" placeholder="Ask about flights, navigation, services...">
    <button class="btn btn-primary" id="sendBtn">Send</button>
  </div>
</div>

<!-- Hidden map modal -->
<div class="modal fade" id="mapModal" tabindex="-1">
  <div class="modal-dialog modal-lg modal-dialog-centered">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title">Entebbe Airport Map</h5>
        <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
      </div>
      <div class="modal-body">
        <div id="map" class="map-area"></div>
      </div>
    </div>
  </div>
</div>

<!-- Bootstrap + Leaflet -->
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js"></script>

<script>
const messagesEl = document.getElementById('messages');
const input = document.getElementById('input');
const sendBtn = document.getElementById('sendBtn');

function pushMessage(text, who='bot'){
  const wrap = document.createElement('div');
  wrap.className = 'message '+who;
  const bubble = document.createElement('div');
  bubble.className = 'bubble';
  bubble.innerHTML = text;
  wrap.appendChild(bubble);
  messagesEl.appendChild(wrap);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

function userSend(){
  const v = input.value.trim();
  if(!v) return;
  pushMessage(v,'user');
  input.value='';
  handleQuery(v.toLowerCase());
}

sendBtn.addEventListener('click', userSend);
input.addEventListener('keydown', e=>{ if(e.key==='Enter') userSend(); });

function quick(q){ input.value=q; userSend(); }

function handleQuery(q){
  if(q.includes('flight')){
    pushMessage('Here is the latest flight info (demo):<br>‚úàÔ∏è UG123 ‚Äî On-time<br>‚úàÔ∏è KQ432 ‚Äî Departed<br>‚úàÔ∏è QR324 ‚Äî Landed');
    return;
  }
  if(q.includes('map')){
    pushMessage('Opening terminal map...');
    const mapModal = new bootstrap.Modal(document.getElementById('mapModal'));
    mapModal.show();
    setTimeout(initMap, 300);
    return;
  }
  if(q.includes('kampala') || q.includes('transport')){
    pushMessage('üöï You can take a taxi, shuttle, or bus via the Expressway to Kampala (~40‚Äì60 mins).');
    return;
  }
  if(q.includes('baggage')){
    pushMessage('üß≥ Baggage claim is at the arrivals terminal. For assistance, check airline desks near Belt 3.');
    return;
  }
  pushMessage('I can help with: Flight status, Terminal maps, Navigation, Baggage claim.');
}

let mapInited=false;
function initMap(){
  if(mapInited) return;
  mapInited=true;
  const entebbeLatLng = [0.0424,32.4435];
  const map = L.map('map').setView(entebbeLatLng, 14);
  L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
    attribution: '¬© OpenStreetMap'
  }).addTo(map);
  L.marker(entebbeLatLng).addTo(map).bindPopup('Entebbe Intl Airport (EBB)').openPopup();
}

pushMessage('üëã Welcome to <strong>Entebbe Airport Assistant</strong>! Ask me about flights, navigation, or services.');
</script>
</body>
</html>
